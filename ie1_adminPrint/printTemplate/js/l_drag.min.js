$.fn.extend({
  l_drag: function(drogThis, box) {
    this.css({ position: "absolute", cursor: "move" });
    this.mousedown(function(b) {
      var a = $(this);
      var b = event || window.event;
      a.start_pos = { x: b.clientX, y: b.clientY };
      a.css("z-index", 1);
      a.start_pos_box = {
        x: parseInt(a.css("left")),
        y: parseInt(a.css("top"))
      };
      a.sk = {
        x: a.start_pos_box.x + a.start_pos.x,
        y: a.start_pos_box.y + a.start_pos.y
      };
      window.onmousemove = function(c) {
        var c = event || window.event,
          left = "",
          top = "",
          x = c.clientX - a.start_pos.x + a.start_pos_box.x,
          y = c.clientY - a.start_pos.y + a.start_pos_box.y;
        if (x <= 0) {
          left = 0;
        } else {
          if (x >= box.width() - drogThis.width() - 10) {
            left = box.width() - drogThis.width() - 10;
          } else {
            left = x;
          }
        }
        if (y <= 0) {
          top = 0;
        } else {
          if (y >= box.height() - drogThis.height() - 10) {
            top = box.height() - drogThis.height() - 10;
          } else {
            top = y;
          }
        }
        a.css({ left: left, top: top });
      };
      window.onmouseup = function(c) {
        var c = event || window.event;
        window.onmousemove = null;
        a.css("z-index", 0);
      };
    });
    return this;
  }
});
