(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6f53f68c"],{"04b4":function(e,t,n){},"278c":function(e,t,n){"use strict";var r=n("f0ef"),o=n.n(r);o.a},"4caa":function(e,t,n){"use strict";var r=n("6f64"),o=n.n(r);o.a},"642e":function(e,t,n){},"6f64":function(e,t,n){},"704c":function(e,t,n){"use strict";var r=n("98f8"),o=n.n(r);o.a},9596:function(e,t,n){},"98f8":function(e,t,n){},"9d64":function(e,t,n){e.exports=n.p+"static/img/logo.8085b5fa.png"},"9ed6":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login-bg"},[r("div",{staticClass:"login-container"},[r("div",{staticClass:"login-top"},[r("img",{staticClass:"logo_url_login",staticStyle:{width:"150px",display:"inline-block"},attrs:{src:n("9d64")},on:{click:e.gojuanpao}}),e._v(" "),r("div",{staticClass:"login-homepage",on:{click:e.gojuanpao}},[r("svg-icon",{staticStyle:{"font-size":"115%"},attrs:{"icon-class":"zhuye"}}),r("span",{staticStyle:{display:"inline-block",padding:"0 5px"}},[e._v("官网首页")])],1)]),e._v(" "),r("div",{staticClass:"panel-container"},[e.isLogin?r("login-panel",{ref:"login",on:{Verify:e.Verify,register:function(t){e.isLogin=!1,e.isRegister=!0}}}):e._e(),e._v(" "),r("transition",{attrs:{name:"el-fade-in-linear"}},[e.isVerify?r("verify-slide",{on:{login:e.login}}):e._e()],1)],1),e._v(" "),r("div",[e.isRegister?r("register-panel",{on:{login:function(t){e.isLogin=!0,e.isRegister=!1}}}):e._e()],1)])])},o=[],i=(n("8e6e"),n("ac6a"),n("456d"),n("ade3")),a=(n("55dd"),n("53ca")),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login-panel"},[n("div",{staticClass:"login-box"},[n("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:e.loginForm,rules:e.loginRules,"auto-complete":"on","label-position":"left"}},[n("div",{staticClass:"title-container"},[1==e.type?n("h3",{staticClass:"title"},[e._v("登 录")]):n("h3",{staticClass:"title"},[e._v("员 工 登 录")])]),e._v(" "),n("el-form-item",{attrs:{prop:"username"}},[n("el-input",{ref:"username",attrs:{placeholder:"请输入账号",name:"username",type:"text",tabindex:"1","auto-complete":"on","prefix-icon":"el-icon-mobile-phone"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),e._v(" "),n("el-form-item",{attrs:{prop:"password"}},[n("el-input",{key:e.passwordType,ref:"password",attrs:{"show-password":"",placeholder:"请输入密码",name:"password",tabindex:"2","auto-complete":"on","prefix-icon":"el-icon-lock"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin(t)}},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),e._v(" "),n("el-form-item",[n("el-button",{staticStyle:{width:"100%","margin-bottom":"0px"},attrs:{loading:e.loading,type:"primary",plain:""},nativeOn:{click:function(t){return t.preventDefault(),e.handleLogin("loginRules")}}},[e._v("点击验证登录")])],1)],1)],1),e._v(" "),n("div",{staticClass:"bottom"},[n("a",{attrs:{href:"supplier"}},[e._v("入驻商登录")]),e._v(" "),1==e.type?n("a",{on:{click:function(t){return e.changeLoging(2)}}},[e._v("员工登录")]):n("a",{on:{click:function(t){return e.changeLoging(1)}}},[e._v("超级管理员登录")])]),e._v(" "),n("el-dialog",{attrs:{visible:e.dialogVerify,width:"360px"},on:{"update:visible":function(t){e.dialogVerify=t}}})],1)},c=[],l=n("61f7"),u=n("5f87"),d={name:"Login",data:function(){var e=function(e,t,n){Object(l["b"])(t)?n():n(new Error("请输入手机号"))},t=function(e,t,n){t.length<6?n(new Error("请输入不少于6个字符的密码")):n()};return{dialogVerify:!1,isAgrre:!0,loginForm:{username:Object(u["b"])(),password:Object(u["c"])()},loginRules:{username:[{required:!0,trigger:"blur",validator:e}],password:[{required:!0,trigger:"blur",validator:t}]},loading:!1,passwordType:"password",redirect:void 0,type:1}},watch:{$route:{handler:function(e){this.redirect=e.query&&e.query.redirect},immediate:!0}},methods:{handleLogin:function(){var e=this;this.$refs.loginForm.validate((function(t){if(!t)return!1;e.isAgrre?e.$emit("Verify",e.loginForm):e.$message.error("请阅读并勾选同意《用户使用协议》后，方可登录")}))},register:function(){this.$emit("register")},changeLoging:function(e){this.type=e}}},f=d,p=(n("ffd7"),n("4caa"),n("2877")),g=Object(p["a"])(f,s,c,!1,null,"d4a2431e",null),m=g.exports,h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login-panel"},[n("div",{staticClass:"login-box"},[n("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:e.loginForm,rules:e.loginRules,"auto-complete":"on","label-position":"left"}},[n("el-form-item",{attrs:{prop:"username"}},[n("el-input",{ref:"username",attrs:{placeholder:"请输入手机号",name:"username",type:"text",tabindex:"1","auto-complete":"on","prefix-icon":"el-icon-mobile-phone"},on:{blur:e.verifyPhone},model:{value:e.loginForm.phone,callback:function(t){e.$set(e.loginForm,"phone",e._n(t))},expression:"loginForm.phone"}})],1),e._v(" "),n("el-form-item",{attrs:{prop:"vercode"}},[n("el-input",{ref:"vercode",staticStyle:{width:"54%"},attrs:{placeholder:"请输入验证码",name:"vercode",type:"text",tabindex:"1","auto-complete":"on","prefix-icon":"el-icon-key"},model:{value:e.loginForm.vercode,callback:function(t){e.$set(e.loginForm,"vercode",t)},expression:"loginForm.vercode"}}),e._v(" "),n("el-button",{style:"margin-left:10px;padding:12px "+e.butPadding+"px",attrs:{type:"primary",plain:"",disabled:"获取验证码"!==e.codeButText},on:{click:e.getCode}},[e._v(e._s(e.codeButText)+"  \n        ")])],1),e._v(" "),n("el-form-item",{attrs:{prop:"password"}},[n("el-input",{key:e.passwordType,ref:"password",attrs:{"show-password":"",placeholder:"请输入密码",name:"password",tabindex:"2","auto-complete":"on","prefix-icon":"el-icon-lock"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin(t)}},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),e._v(" "),n("el-form-item",{attrs:{prop:"repass"}},[n("el-input",{key:e.passwordType,ref:"repass",attrs:{"show-password":"",placeholder:"请再次输入密码",name:"repass",tabindex:"3","auto-complete":"on","prefix-icon":"el-icon-lock"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin(t)}},model:{value:e.loginForm.repass,callback:function(t){e.$set(e.loginForm,"repass",t)},expression:"loginForm.repass"}})],1),e._v(" "),n("el-form-item",[n("el-button",{staticStyle:{width:"100%","margin-bottom":"0px"},attrs:{loading:e.loading,type:"primary"},on:{click:function(t){return e.handleLogin()}}},[e._v("确 认 注 册")])],1),e._v(" "),n("div",{staticClass:"other"},[n("div",{staticStyle:{display:"inline-block"}},[n("el-checkbox",{model:{value:e.isAgrre,callback:function(t){e.isAgrre=t},expression:"isAgrre"}},[n("span",{staticClass:"other-user-text"},[e._v("已阅读并同意")]),n("el-link",{staticStyle:{"font-size":"10px"},attrs:{type:"primary"}},[e._v("《用户使用协议》")])],1)],1),e._v(" "),n("div",{staticStyle:{float:"right",display:"inline-block"}},[n("el-link",{staticStyle:{"font-size":"10px"},attrs:{type:"primary"}},[e._v("忘记密码？")])],1)])],1)],1),e._v(" "),n("div",{staticClass:"register-link"},[n("el-link",{staticStyle:{"font-size":"10px"},attrs:{type:"info"},on:{click:e.login}},[e._v("登录"),n("i",{staticClass:"el-icon-arrow-right"})])],1),e._v(" "),n("el-dialog",{attrs:{visible:e.dialogVerify,width:"360px"},on:{"update:visible":function(t){e.dialogVerify=t}}})],1)},b=[],v=n("c24f");function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){Object(i["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var O={name:"Login",data:function(){var e=this,t=function(e,t,n){Object(l["b"])(t)?n():n(new Error("请输入手机号"))},n=function(e,t,n){t.length<6?n(new Error("请输入不少于6个字符的密码")):n()},r=function(t,n,r){n!==e.loginForm.password?r(new Error("两次输入的密码不一致！")):r()};return{dialogVerify:!1,isAgrre:!0,loginForm:{username:Object(u["b"])(),password:Object(u["c"])()},loginRules:{username:[{required:!0,trigger:"blur",validator:t}],password:[{required:!0,trigger:"blur",validator:n}],vercode:[{required:!0,trigger:"blur",message:"请输入验证码"}],repass:[{required:!0,trigger:"blur",validator:r}]},loading:!1,passwordType:"password",redirect:void 0,codeButText:"获取验证码",butPadding:20}},watch:{$route:{handler:function(e){this.redirect=e.query&&e.query.redirect},immediate:!0}},methods:{verifyPhone:function(){var e=this;Object(v["e"])({phone:this.loginForm.phone}).then((function(t){200===t.status&&e.$message.warning("改手机号已注册！")}))},getCode:function(){var e=this;Object(v["a"])({phone:this.loginForm.phone,access_token:""}).then((function(t){if(200===t.status){var n=59;e.butPadding=5,e.codeButText=n+"秒后重新获取",e.intervalId=setInterval((function(){n--,n>0?e.codeButText=n+"秒后重新获取":(e.codeButText="获取验证码",e.butPadding=20,clearInterval(e.intervalId))}),1e3)}else e.$message.error(t.message)}))},handleLogin:function(){var e=this;this.$refs.loginForm.validate((function(t){if(!t)return!1;e.isAgrre?Object(v["d"])(_(_({},e.loginForm),{},{agreement:"on",access_token:""})).then((function(t){200===t.status?(e.$message.success("注册成功！"),e.$emit("register")):e.$message.error(t.message)})):e.$message.error("请阅读并勾选同意《用户使用协议》后，方可登录")}))},test:function(){console.log("OK!")},login:function(){this.$emit("login")}}},w=O,k=(n("9f82c"),n("af44"),Object(p["a"])(w,h,b,!1,null,"18e2728d",null)),j=k.exports,x=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"verify"},[n("div",{staticClass:"verify-panel",style:"left: "+(e.innerWidth/2-148)+"px"},[n("Puzzle",{directives:[{name:"show",rawName:"v-show",value:e.isVerificationShow,expression:"isVerificationShow"}],attrs:{puzzleImgList:e.imgName,blockType:"puzzle",onSuccess:e.success}})],1)])},S=[],$=n("95ff"),F=n.n($),C={name:"VerifySlide",components:{Puzzle:F.a},data:function(){return{isVerificationShow:!0,innerWidth:window.innerWidth,imgName:["images/1.jpg","images/2.jpg","images/3.jpg","images/4.jpg","images/5.jpg","images/6.jpg"]}},methods:{success:function(){this.$emit("login")}}},P=C,V=(n("278c"),n("704c"),Object(p["a"])(P,x,S,!1,null,"70a8f70e",null)),L=V.exports,E=n("b7be"),R=n("ef75");function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){Object(i["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T={name:"login",components:{LoginPanel:m,VerifySlide:L,RegisterPanel:j},data:function(){return{isLogin:!0,isVerify:!1,isRegister:!1,loginForm:{},url:"https://www.juanpao.com"}},created:function(){sessionStorage.oldroutes||(sessionStorage.oldroutes=JSON.stringify(this.$router.options.routes))},mounted:function(){if(sessionStorage.getItem("copyright")){var e=JSON.parse(sessionStorage.getItem("copyright"));e.background_name&&(document.title=e.background_name),e.ico_url&&(document.head.querySelector("link[rel=icon]").href=e.ico_url),e.official_website_link&&(this.url=e.official_website_link),e.logo_url&&(document.body.querySelector("img[class=logo_url_login]").src=e.logo_url)}else this.getCopyRight()},methods:{Verify:function(e){this.loginForm=e,this.isVerify=!0},getCopyRight:function(){var e=this;Object(E["s"])().then((function(t){var n="1"===t.data.filter((function(e){return"copyright"===e.class}))[0].status;n&&Object(E["r"])().then((function(t){200===t.status&&"object"===Object(a["a"])(t.data)&&(t.data.background_name&&(document.title=t.data.background_name),t.data.ico_url&&(document.head.querySelector("link[rel=icon]").href=t.data.ico_url),t.data.official_website_link&&(e.url=t.data.official_website_link),t.data.logo_url&&(document.body.querySelector("img[class=logo_url_login]").src=t.data.logo_url),sessionStorage.setItem("copyright",JSON.stringify({background_name:t.data.background_name,ico_url:t.data.ico_url,background_bottom:t.data.background_bottom,official_website_link:t.data.official_website_link,logo_url:t.data.logo_url})))})),sessionStorage.highMenu=JSON.stringify(n)})).catch((function(){}))},gojuanpao:function(){location.href=this.url},login:function(){var e=this;console.log(this.$refs.login.type);var t=this.$loading({lock:!0,text:"登录中...",spinner:"el-icon-loading",background:"rgba(0,0,0,0.7)"});1==this.$refs.login.type?this.$store.dispatch("user/login",this.loginForm).then((function(){t.close(),e.$store.dispatch("settings/Routers",JSON.parse(sessionStorage.oldroutes)||e.$router.options.routes),localStorage.oldroutes=JSON.stringify(e.$router.options.routes),e.$router.push({path:e.redirect||"/"})})).catch((function(){e.isVerify=!1,t.close()})):this.$store.dispatch("user/merchantSubLogin",this.loginForm).then((function(){var n=Object.fromEntries(JSON.parse(sessionStorage.oldroutes).map((function(e){return[e.path,e.meta]})));Object(R["i"])({key:e.$store.state.app.activeApp.saa_key}).then((function(r){var o=r.data.map((function(e){return console.log(e.path),z(z({},e),{},{hidden:1==e.hidden||e.hidden,meta:n[e.path]||{title:e.path}})})).sort((function(e,t){return e.id-t.id}));e.$router.options.routes=[],e.$router.options.routes=o,console.log(e.$router,o),e.$store.dispatch("settings/Routers",e.$router.options.routes),t.close(),e.$router.push({path:e.redirect||"/dashboard"})}))})).catch((function(){e.isVerify=!1,t.close()}))},test:function(){console.log("OK!")}}},N=T,D=(n("b650"),Object(p["a"])(N,r,o,!1,null,"863229ce",null));t["default"]=D.exports},"9f82c":function(e,t,n){"use strict";var r=n("04b4"),o=n.n(r);o.a},af44:function(e,t,n){"use strict";var r=n("9596"),o=n.n(r);o.a},b650:function(e,t,n){"use strict";var r=n("642e"),o=n.n(r);o.a},c958:function(e,t,n){},ef75:function(e,t,n){"use strict";n.d(t,"e",(function(){return o})),n.d(t,"d",(function(){return i})),n.d(t,"j",(function(){return a})),n.d(t,"l",(function(){return s})),n.d(t,"a",(function(){return c})),n.d(t,"g",(function(){return l})),n.d(t,"c",(function(){return u})),n.d(t,"m",(function(){return d})),n.d(t,"b",(function(){return f})),n.d(t,"k",(function(){return p})),n.d(t,"f",(function(){return g})),n.d(t,"h",(function(){return m})),n.d(t,"i",(function(){return h}));var r=n("b775");function o(e){return Object(r["a"])({url:"/merchantSubUser",method:"get",params:e})}function i(e){var t=e.id;return delete e.id,Object(r["a"])({url:"/merchantSubUser/"+t,method:"get",params:e})}function a(e){return Object(r["a"])({url:"/merchantSubUser",method:"post",data:e})}function s(e){var t=e.id;return delete e.id,Object(r["a"])({url:"/merchantSubUser/"+t,method:"put",data:e})}function c(e){var t=e.id;return delete e.id,Object(r["a"])({url:"/merchantSubUser/"+t,method:"delete",data:e})}function l(e){return Object(r["a"])({url:"/merchantSubGroup",method:"get",params:e})}function u(e){return Object(r["a"])({url:"/merchantNewRules",method:"get",params:e})}function d(e){var t=e.id;return delete e.id,Object(r["a"])({url:"/merchantSubGroup/"+t,method:"put",data:e})}function f(e){var t=e.id;return delete e.id,Object(r["a"])({url:"/merchantSubGroup/"+t,method:"delete",data:e})}function p(e){return Object(r["a"])({url:"/merchantSubGroup",method:"post",data:e})}function g(e){return Object(r["a"])({url:"/merchantSubKefu",method:"get",params:e})}function m(e){return Object(r["a"])({url:"/merchantMenu",method:"get",params:e})}function h(e){return Object(r["a"])({url:"/merchantSubMenu",method:"get",params:e})}},f0ef:function(e,t,n){},ffd7:function(e,t,n){"use strict";var r=n("c958"),o=n.n(r);o.a}}]);