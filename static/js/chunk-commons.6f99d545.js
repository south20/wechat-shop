(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-commons"],{"00c3":function(t,e,i){"use strict";var n=i("305d"),s=i.n(n);s.a},"0d50":function(t,e,i){"use strict";var n=i("e2cc"),s=i.n(n);s.a},"2f39":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-button",{attrs:{type:"primary",plain:"",size:"small"},on:{click:t.openPicPanel}},[t._v(t._s(t.buttonText))]),t._v(" "),i("Modal",{attrs:{width:"1128","footer-hide":!0,"z-index":2019},model:{value:t.disPicPanel,callback:function(e){t.disPicPanel=e},expression:"disPicPanel"}},[t.disPicPanel?i("photo-album",{attrs:{maxcount:t.maxcount},on:{selectPicData:t.getPicData}}):t._e()],1)],1)},s=[],a=(i("ac6a"),i("c5f6"),i("a436")),c={name:"SelectImg",components:{PhotoAlbum:a["a"]},props:{maxcount:{type:Number,default:1},buttonText:{type:String,default:"选择图片"}},data:function(){return{disPicPanel:!1,count:1,max:1,picList:[]}},mounted:function(){this.count=this.maxcount,this.max=this.maxcount},methods:{openPicPanel:function(){this.maxcount>0?this.disPicPanel=!0:this.$message.warning("最多可选择".concat(this.count,"张图片，已选择").concat(this.count-this.max,"张,不可选择"))},getPicData:function(t){var e=this;this.disPicPanel=!1,t.forEach((function(t){if(!(e.max>0))return e.$message.warning("最多可选择".concat(e.count,"张图片，已选择").concat(e.count-e.max,"张")),!1;e.picList.push(t.pic_url),e.max--,e.$emit("selectData",e.picList),e.max=e.maxcount,e.count=e.maxcount,e.picList=[]}))}}},o=c,r=i("2877"),l=Object(r["a"])(o,n,s,!1,null,null,null);e["a"]=l.exports},"305d":function(t,e,i){},"334a":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"pic-box",style:{margin:t.picmargin,height:t.boxHeight,width:t.size.width+"px"}},[i("div",{staticClass:"photoalbum-img",style:{width:t.size.width+"px",height:t.size.height+"px","background-image":"url("+t.picurl+")"},on:{click:t.selectPic,mouseenter:function(e){t.isHover=!0},mouseleave:function(e){t.isHover=!1}}},[t.isSelect?i("i",{staticClass:"el-icon-check select-pic-icon",style:{width:t.size.width+"px",height:t.size.height+"px","line-height":t.size.height+"px"}}):t._e(),t._v(" "),t.isHover&&!t.isSelect?i("div",[t.disdel?i("i",{staticClass:"el-icon-delete  del-pic-icon",style:{top:t.size.height-35+"px","font-size":t.size.width/5+"px",left:"-20px"},on:{click:function(e){return e.stopPropagation(),t.delPic(e)}}}):t._e(),t._v(" "),t.disview?i("i",{staticClass:"el-icon-zoom-in del-pic-icon",style:{top:t.size.height-35+"px","font-size":t.size.width/5+"px",right:"-20px"},on:{click:function(e){return e.stopPropagation(),t.lookPic(e)}}}):t._e()]):t._e(),t._v(" "),!t.picsize||t.isHover||t.isSelect?t._e():i("div",{staticClass:"pic-size",style:{top:t.size.height-25+"px"}},[t._v("\n      "+t._s(t._f("intpart")(t.picsize.width))+" × "+t._s(t._f("intpart")(t.picsize.height))+"\n    ")])]),t._v(" "),t.picname?i("div",{staticClass:"picbox-text",style:{width:t.size.width+"px",top:t.size.height+"px"}},[t._v(t._s(t.picname))]):t._e(),t._v(" "),t.isPicView?i("img-view",{attrs:{urlList:t.piclist,url:t.picurl,onClose:t.closeView}}):t._e()],1)},s=[],a=(i("28a5"),i("c5f6"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"viewer-fade"}},[i("div",{staticClass:"el-image-viewer__wrapper",style:{"z-index":t.zIndex}},[i("div",{staticClass:"el-image-viewer__mask",on:{click:t.hide}}),t._v(" "),i("span",{staticClass:"el-image-viewer__btn el-image-viewer__close",on:{click:t.hide}},[i("i",{staticClass:"el-icon-circle-close"})]),t._v(" "),t.isSingle?t._e():[i("span",{staticClass:"el-image-viewer__btn el-image-viewer__prev",class:{"is-disabled":!t.infinite&&t.isFirst},on:{click:t.prev}},[i("i",{staticClass:"el-icon-arrow-left"})]),t._v(" "),i("span",{staticClass:"el-image-viewer__btn el-image-viewer__next",class:{"is-disabled":!t.infinite&&t.isLast},on:{click:t.next}},[i("i",{staticClass:"el-icon-arrow-right"})])],t._v(" "),i("div",{staticClass:"el-image-viewer__btn el-image-viewer__actions"},[i("div",{staticClass:"el-image-viewer__actions__inner"},[i("i",{staticClass:"el-icon-zoom-out",on:{click:function(e){return t.handleActions("zoomOut")}}}),t._v(" "),i("i",{staticClass:"el-icon-zoom-in",on:{click:function(e){return t.handleActions("zoomIn")}}}),t._v(" "),i("i",{staticClass:"el-image-viewer__actions__divider"}),t._v(" "),i("i",{class:t.mode.icon,on:{click:t.toggleMode}}),t._v(" "),i("i",{staticClass:"el-image-viewer__actions__divider"}),t._v(" "),i("i",{staticClass:"el-icon-refresh-left",on:{click:function(e){return t.handleActions("anticlocelise")}}}),t._v(" "),i("i",{staticClass:"el-icon-refresh-right",on:{click:function(e){return t.handleActions("clocelise")}}})])]),t._v(" "),i("div",{staticClass:"el-image-viewer__canvas"},t._l(t.urlList,(function(e,n){return n===t.index?i("img",{key:e,ref:"img",refInFor:!0,staticClass:"el-image-viewer__img",style:t.imgStyle,attrs:{src:t.currentImg},on:{load:t.handleImgLoad,error:t.handleImgError,mousedown:t.handleMouseDown}}):t._e()})),0)],2)])}),c=[],o=(i("8e6e"),i("ade3")),r=(i("8615"),i("ac6a"),i("456d"),i("526f")),l=i("6bd7");function u(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function d(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?u(Object(i),!0).forEach((function(e){Object(o["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):u(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var h={CONTAIN:{name:"contain",icon:"el-icon-full-screen"},ORIGINAL:{name:"original",icon:"el-icon-c-scale-to-original"}},p=Object(l["a"])()?"DOMMouseScroll":"mousewheel",m={name:"ImgView",props:{urlList:{type:Array,default:function(){return[]}},url:{type:String,default:""},zIndex:{type:Number,default:2e3},onSwitch:{type:Function,default:function(){}},onClose:{type:Function,default:function(){}}},data:function(){return{index:this.urlList.indexOf(this.url)>0?this.urlList.indexOf(this.url):0,isShow:!1,infinite:!0,loading:!1,mode:h.CONTAIN,transform:{scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}},computed:{isSingle:function(){return this.urlList.length<=1},isFirst:function(){return 0===this.index},isLast:function(){return this.index===this.urlList.length-1},currentImg:function(){return this.urlList[this.index]},imgStyle:function(){var t=this.transform,e=t.scale,i=t.deg,n=t.offsetX,s=t.offsetY,a=t.enableTransition,c={transform:"scale(".concat(e,") rotate(").concat(i,"deg)"),transition:a?"transform .3s":"","margin-left":"".concat(n,"px"),"margin-top":"".concat(s,"px")};return this.mode===h.CONTAIN&&(c.maxWidth=c.maxHeight="100%"),c}},watch:{index:{handler:function(t){this.reset(),this.onSwitch(t)}},currentImg:function(){var t=this;this.$nextTick((function(){var e=t.$refs.img[0];e.complete||(t.loading=!0)}))}},methods:{hide:function(){this.deviceSupportUninstall(),this.onClose()},deviceSupportInstall:function(){var t=this;this._keyDownHandler=Object(l["c"])((function(e){var i=e.keyCode;switch(i){case 27:t.hide();break;case 32:t.toggleMode();break;case 37:t.prev();break;case 38:t.handleActions("zoomIn");break;case 39:t.next();break;case 40:t.handleActions("zoomOut");break}})),this._mouseWheelHandler=Object(l["c"])((function(e){var i=e.wheelDelta?e.wheelDelta:-e.detail;i>0?t.handleActions("zoomIn",{zoomRate:.015,enableTransition:!1}):t.handleActions("zoomOut",{zoomRate:.015,enableTransition:!1})})),Object(r["b"])(document,"keydown",this._keyDownHandler),Object(r["b"])(document,p,this._mouseWheelHandler)},deviceSupportUninstall:function(){Object(r["a"])(document,"keydown",this._keyDownHandler),Object(r["a"])(document,p,this._mouseWheelHandler),this._keyDownHandler=null,this._mouseWheelHandler=null},handleImgLoad:function(){this.loading=!1},handleImgError:function(t){this.loading=!1,t.target.alt="加载失败"},handleMouseDown:function(t){var e=this;if(!this.loading&&0===t.button){var i=this.transform,n=i.offsetX,s=i.offsetY,a=t.pageX,c=t.pageY;this._dragHandler=Object(l["c"])((function(t){e.transform.offsetX=n+t.pageX-a,e.transform.offsetY=s+t.pageY-c})),Object(r["b"])(document,"mousemove",this._dragHandler),Object(r["b"])(document,"mouseup",(function(){Object(r["a"])(document,"mousemove",e._dragHandler)})),t.preventDefault()}},reset:function(){this.transform={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}},toggleMode:function(){if(!this.loading){var t=Object.keys(h),e=Object.values(h),i=e.indexOf(this.mode),n=(i+1)%t.length;this.mode=h[t[n]],this.reset()}},prev:function(){if(!this.isFirst||this.infinite){var t=this.urlList.length;this.index=(this.index-1+t)%t}},next:function(){if(!this.isLast||this.infinite){var t=this.urlList.length;this.index=(this.index+1)%t}},handleActions:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.loading){var i=d({zoomRate:.2,rotateDeg:90,enableTransition:!0},e),n=i.zoomRate,s=i.rotateDeg,a=i.enableTransition,c=this.transform;switch(t){case"zoomOut":c.scale>.2&&(c.scale=parseFloat((c.scale-n).toFixed(3)));break;case"zoomIn":c.scale=parseFloat((c.scale+n).toFixed(3));break;case"clocelise":c.deg+=s;break;case"anticlocelise":c.deg-=s;break}c.enableTransition=a}}},mounted:function(){this.deviceSupportInstall()}},f=m,g=i("2877"),v=Object(g["a"])(f,a,c,!1,null,null,null),b=v.exports,_={name:"LImg",components:{ImgView:b},props:{picmargin:{type:String,required:!1,default:"0"},picname:{type:String,required:!1,default:void 0},size:{type:Object,required:!1,default:function(){return{width:115,height:115}}},pickey:{type:[String,Object,Number],required:!1},picurl:{type:String,required:!0,default:"images/2.jpg"},piclist:{type:Array,required:!1,default:function(){return[]}},picsize:{type:Object,required:!1},picdata:{type:[String,Object],required:!1,default:function(){return null}},ischecked:{type:Boolean,required:!1,default:!1},disdel:{type:Boolean,required:!1,default:!0},disview:{type:Boolean,required:!1,default:!0}},computed:{boxHeight:function(){return this.picname?this.size.height+30+"px":this.size.height+"px"}},data:function(){return{isSelect:!1,isHover:!1,isPicView:!1}},methods:{selectPic:function(){this.ischecked||this.isSelect?(this.isSelect=!this.isSelect,this.$emit("selectPic",{checked:this.isSelect,picData:this.picdata})):this.lookPic()},delPic:function(){this.$emit("delPic",this.picdata)},lookPic:function(){0===this.piclist.length&&this.piclist.push(this.picurl),this.isPicView=!0},closeView:function(){this.isPicView=!1}},filters:{intpart:function(t){return t?t.split(".")[0]:t}}},y=_,w=(i("0d50"),Object(g["a"])(y,n,s,!1,null,"43642cb2",null));e["a"]=w.exports},"5b16":function(t,e,i){},8256:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tinymce-container",class:{fullscreen:t.fullscreen},style:{width:t.containerWidth}},[i("textarea",{staticClass:"tinymce-textarea",staticStyle:{"line-height":"0"},attrs:{id:t.tinymceId}}),t._v(" "),i("div",{staticClass:"editor-custom-btn-container"},[i("el-button",{staticClass:"editor-upload-btn",attrs:{type:"text",size:"small"},on:{click:function(e){t.disPicPanel=!0}}},[t._v("选择图片")])],1),t._v(" "),i("Modal",{attrs:{width:"1128","footer-hide":!0,"z-index":2100},model:{value:t.disPicPanel,callback:function(e){t.disPicPanel=e},expression:"disPicPanel"}},[t.disPicPanel?i("photo-album",{on:{selectPicData:t.imageSuccessCBK}}):t._e()],1)],1)},s=[],a=(i("ac6a"),i("c5f6"),["advlist anchor autolink autosave code codesample colorpicker colorpicker contextmenu directionality emoticons fullscreen hr image imagetools insertdatetime link lists media nonbreaking noneditable pagebreak paste preview print save searchreplace spellchecker tabfocus table template textcolor textpattern visualblocks visualchars wordcount"]),c=a,o=["searchreplace bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample","hr bullist numlist link image charmap preview anchor pagebreak insertdatetime media table emoticons forecolor backcolor fullscreen"],r=o;i("ac4d"),i("8a81"),i("5df3"),i("1c4c"),i("7f7f"),i("6b54");function l(t,e){var i;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=u(t))||e&&t&&"number"===typeof t.length){i&&(t=i);var n=0,s=function(){};return{s:s,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,o=!1;return{s:function(){i=t[Symbol.iterator]()},n:function(){var t=i.next();return c=t.done,t},e:function(t){o=!0,a=t},f:function(){try{c||null==i.return||i.return()}finally{if(o)throw a}}}}function u(t,e){if(t){if("string"===typeof t)return d(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?d(t,e):void 0}}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var h=[];function p(){return window.tinymce}var m=function(t,e){var i=document.getElementById(t),n=e||function(){};if(!i){var s=document.createElement("script");s.src=t,s.id=t,document.body.appendChild(s),h.push(n);var a="onload"in s?c:o;a(s)}function c(e){e.onload=function(){this.onerror=this.onload=null;var t,i=l(h);try{for(i.s();!(t=i.n()).done;){var n=t.value;n(null,e)}}catch(s){i.e(s)}finally{i.f()}h=null},e.onerror=function(){this.onerror=this.onload=null,n(new Error("Failed to load "+t),e)}}function o(t){t.onreadystatechange=function(){if("complete"===this.readyState||"loaded"===this.readyState){this.onreadystatechange=null;var e,i=l(h);try{for(i.s();!(e=i.n()).done;){var n=e.value;n(null,t)}}catch(s){i.e(s)}finally{i.f()}h=null}}}i&&n&&(p()?n(null,i):h.push(n))},f=m,g=i("a436"),v="https://cdn.jsdelivr.net/npm/tinymce-all-in-one@4.9.3/tinymce.min.js",b={name:"Tinymce",components:{PhotoAlbum:g["a"]},props:{id:{type:String,default:function(){return"vue-tinymce-"+ +new Date+(1e3*Math.random()).toFixed(0)}},value:{type:String,default:""},toolbar:{type:Array,required:!1,default:function(){return["removeformat undo redo |  bullist numlist | outdent indent | forecolor | fullscreen code","bold italic blockquote | h2 p  media link | alignleft aligncenter alignright | emoticons | fontsizeselect | fontselect "]}},menubar:{type:String,default:"file edit insert view format table"},height:{type:[Number,String],required:!1,default:360},width:{type:[Number,String],required:!1,default:"auto"}},data:function(){return{disPicPanel:!1,hasChange:!1,hasInit:!1,tinymceId:this.id,fullscreen:!1,languageTypeList:{en:"en",zh:"zh_CN",es:"es_MX",ja:"ja"}}},computed:{containerWidth:function(){var t=this.width;return/^[\d]+(\.[\d]+)?$/.test(t)?"".concat(t,"px"):t}},watch:{value:function(t){var e=this;!this.hasChange&&this.hasInit&&this.$nextTick((function(){return window.tinymce.get(e.tinymceId).setContent(t||"")}))}},mounted:function(){this.init()},activated:function(){window.tinymce&&this.initTinymce()},deactivated:function(){this.destroyTinymce()},destroyed:function(){this.destroyTinymce()},methods:{init:function(){var t=this;f(v,(function(e){e?t.$message.error(e.message):t.initTinymce()}))},initTinymce:function(){var t=this,e=this;window.tinymce.init({convert_urls:!1,content_style:"body {}",selector:"#".concat(this.tinymceId),language:this.languageTypeList["zh"],height:this.height,body_class:"panel-body ",object_resizing:!1,toolbar:this.toolbar.length>0?this.toolbar:r,menubar:this.menubar,plugins:c,fontsize_formats:"8pt 10pt 12pt 14pt 18pt 24pt 36pt",end_container_on_empty_block:!0,powerpaste_word_import:"clean",code_dialog_height:450,code_dialog_width:1e3,advlist_bullet_styles:"square",advlist_number_styles:"default",imagetools_cors_hosts:["www.tinymce.com","codepen.io"],default_link_target:"_blank",link_title:!1,nonbreaking_force_tab:!0,init_instance_callback:function(i){e.value&&i.setContent(e.value),e.hasInit=!0,i.on("NodeChange Change KeyUp SetContent",(function(){t.hasChange=!0,t.$emit("input",i.getContent())}))},setup:function(t){t.on("FullscreenStateChanged",(function(t){e.fullscreen=t.state}))}})},destroyTinymce:function(){var t=window.tinymce.get(this.tinymceId);this.fullscreen&&t.execCommand("mceFullScreen"),t&&t.destroy()},setContent:function(t){window.tinymce.get(this.tinymceId).setContent(t)},getContent:function(){window.tinymce.get(this.tinymceId).getContent()},imageSuccessCBK:function(t){this.disPicPanel=!1;var e=this;t.forEach((function(t){window.tinymce.get(e.tinymceId).insertContent('<img style="width: 100%; vertical-align: middle" class="wscnph" src="'.concat(t.pic_url,'" >'))}))}}},_=b,y=(i("00c3"),i("2877")),w=Object(y["a"])(_,n,s,!1,null,"b49d79ae",null);e["a"]=w.exports},a436:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"photoalbum-container"},[i("el-row",{staticClass:"photoalbum-title"},[i("el-col",{staticStyle:{"text-align":"left"},attrs:{span:6}},[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.dialogPicGMa=!0}}},[t._v("分组管理")]),t._v(" "),i("el-upload",{ref:"upload",staticStyle:{display:"inline-block"},attrs:{"auto-upload":!1,multiple:"","list-type":"picture",action:"#","show-file-list":!1,"on-change":t.imgChange}},[i("el-button",{staticStyle:{"margin-left":"15px"},attrs:{slot:"trigger",type:"primary",size:"mini"},slot:"trigger"},[i("span",[t._v("上传图片")])])],1)],1),t._v(" "),i("el-col",{staticClass:"photoalbum-title-text",attrs:{span:12}},[t._v("选择图片")]),t._v(" "),i("el-col",{attrs:{span:6}},[i("el-input",{attrs:{placeholder:"请输入搜索内容",size:"mini"},model:{value:t.searchName,callback:function(e){t.searchName=e},expression:"searchName"}}),t._v(" "),i("el-button",{staticClass:"search-button",attrs:{icon:"el-icon-search",circle:""},on:{click:t.search}})],1)],1),t._v(" "),i("el-row",{staticClass:"photoalbum-main"},[i("el-col",{attrs:{span:4}},[i("div",{staticClass:"photoalbum-main-menu"},[i("el-menu",{attrs:{"default-active":"1"}},[i("el-menu-item",{staticClass:"menu-item",attrs:{index:"1"},on:{click:function(e){return t.switchPhoto(0)}}},[i("span",{staticStyle:{display:"inline-block",width:"80%",color:"#606266","font-size":"16px","font-weight":"600","letter-spacing":"3px"}},[t._v(t._s("未分组"))]),t._v(" "),i("span",{staticStyle:{display:"inline-block",width:"19%"}},[t._v(t._s(t.defaultCount))])]),t._v(" "),t._l(t.picGroup,(function(e){return i("el-menu-item",{key:e.id,staticClass:"menu-item",on:{click:function(i){t.switchPhoto(e.id),t.number=e.number}}},[i("span",{staticStyle:{display:"inline-block",width:"80%",color:"#606266","font-size":"16px","font-weight":"600","letter-spacing":"3px"}},[t._v(t._s(e.name))]),t._v(" "),i("span",{staticStyle:{display:"inline-block",width:"19%"}},[t._v(t._s(e.number))])])}))],2)],1)]),t._v(" "),i("el-col",{attrs:{span:20}},[i("div",{staticClass:"photoalbum-main-pic"},t._l(t.imgList,(function(e){return i("l-pic",{key:e.id,attrs:{picurl:e.pic_url,pickey:e.id,picdata:e,picmargin:"0 16px 15px 16px",size:{width:115,height:115},picname:e.name,picsize:{width:e.width,height:e.height},ischecked:t.isChecked&&0!==t.maxcount,piclist:t.viewUrlList},on:{delPic:t.delPic,selectPic:t.selectPic}})})),1)])],1),t._v(" "),i("el-pagination",{staticClass:"photoalbum-page",attrs:{background:"",layout:"total, prev, pager, next, jumper",total:t.number,"page-size":18,"current-page":t.page},on:{"size-change":t.pageChange,"current-change":t.pageChange}}),t._v(" "),i("div",{staticStyle:{"margin-top":"80px"}},[i("el-button",{staticStyle:{padding:"10px 40px","font-size":"16px","font-weight":"600","letter-spacing":"8px"},attrs:{type:"primary"},on:{click:t.submit}},[t._v("确 定")])],1),t._v(" "),i("el-dialog",{attrs:{title:"分组管理",visible:t.dialogPicGMa,width:"640px",modal:!1,"before-close":t.beforeGroup},on:{"update:visible":function(e){t.dialogPicGMa=e}}},[i("pic-group")],1)],1)},s=[],a=(i("7f7f"),i("20d6"),i("ac6a"),i("c5f6"),i("334a")),c=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"picgroup-container"},[i("el-row",{staticClass:"picgroup-title"},[i("el-col",{attrs:{span:4}},[i("el-button",{staticClass:"picgroup-title-add",attrs:{type:"primary",size:"mini"},on:{click:t.add}},[t._v("新 增")])],1),t._v(" "),i("el-col",{attrs:{span:20}},[i("el-input",{staticStyle:{width:"200px",height:"30px",float:"right"},attrs:{placeholder:"请输入搜索内容",size:"mini"},model:{value:t.groupName,callback:function(e){t.groupName=e},expression:"groupName"}}),t._v(" "),i("el-button",{staticClass:"search-button",attrs:{icon:"el-icon-search",circle:""},on:{click:t.searchGroup}})],1)],1),t._v(" "),i("div",[i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.picGroup,stripe:""}},[i("el-table-column",{attrs:{align:"center",label:"分组名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",[e.row.id!==t.editId?i("div",[t._v(t._s(e.row.name))]):t._e(),t._v(" "),e.row.id===t.editId?i("div",[i("el-input",{staticStyle:{width:"100px","text-align":"center"},attrs:{placeholder:"请输入名称",size:"mini"},model:{value:e.row.name,callback:function(i){t.$set(e.row,"name",i)},expression:"scope.row.name"}}),t._v(" "),i("el-button",{staticClass:"action-button",attrs:{type:"text"}},[i("i",{staticClass:"el-icon-check",on:{click:function(i){return t.submit(e.row)}}})])],1):t._e()])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"启用",align:"center",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-switch",{attrs:{"active-color":"#13ce66"},on:{change:function(i){return t.submit(e.row)}},model:{value:e.row.status,callback:function(i){t.$set(e.row,"status",i)},expression:"scope.row.status"}})]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"创建时间",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",[t._v(t._s(t._f("formatTime")(e.row.format_create_time)))])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{staticClass:"action-button",attrs:{type:"text"},on:{click:function(i){return t.eidt(e.row.id)}}},[i("i",{staticClass:"el-icon-edit"})]),t._v(" "),e.row.id!==t.addPic.id?i("el-button",{staticClass:"action-button",attrs:{type:"text"},on:{click:function(i){t.isDel=!0,t.pic=e.row}}},[i("svg-icon",{attrs:{"icon-class":"shanchu"}})],1):t._e()]}}])})],1)],1),t._v(" "),i("el-dialog",{attrs:{visible:t.isDel,width:"200px",modal:!1,"show-close":!1,center:""},on:{"update:visible":function(e){t.isDel=e}}},[i("p",[t._v("确定要删除该分组吗？")]),t._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){t.isDel=!1}}},[t._v("取消")]),t._v(" "),i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){return t.del(t.pic)}}},[t._v("确定")])],1)])],1)},o=[],r=i("34b8"),l={data:function(){return{picGroup:this.$store.state.picture.picGroup}},mounted:function(){this.getPicGroup()},methods:{getPicGroup:function(){var t=this,e={key:this.$store.state.app.activeApp.saa_key,status:"1",limit:100};Object(r["e"])(e).then((function(e){200===e.status?(t.picGroup=e.data,t.picGroup.forEach((function(t){"1"===t.status?t.status=!0:t.status=!1})),t.$store.dispatch("picture/PicGroup",t.picGroup)):(t.picGroup=[],t.$store.dispatch("picture/PicGroup",t.picGroup),204!==e.message&&t.$message(e.message))}))}}},u=i("ed08"),d={name:"PicGroup",mixins:[l],data:function(){return{editId:0,isEdit:!1,isDel:!1,addPic:{id:Math.ceil(10*Math.random()),format_create_time:Object(u["a"])(new Date),status:!0,name:""},pic:{},groupName:""}},methods:{eidt:function(t){var e=this;this.editId===t&&this.addPic.id!==t?(this.editId=0,this.isEdit=!1):this.editId==this.addPic.id?(this.picGroup.splice(this.picGroup.findIndex((function(t){return t.id===e.editId}))),this.editId=0,this.isEdit=!1):(this.editId=t,this.isEdit=!0)},add:function(){this.isEdit?this.$message.error("当前有分组正在编辑，请提交后再添加"):(this.picGroup.unshift(this.addPic),this.editId=this.addPic.id,this.isEdit=!0)},submit:function(t){var e=this;if(this.addPic.id===this.editId){if(""===t.name.trim()||void 0===t.name)return void this.$message.error("分组名称不可为空");var i={name:t.name,status:t.status?"1":"0",key:this.$store.state.app.activeApp.saa_key};Object(r["a"])(i).then((function(t){200===t.status?(e.$message.success("添加成功"),e.getPicGroup(),e.editId=0,e.isEdit=!1):(e.$message.error(t.message),e.editId=0,e.isEdit=!1)}))}else{var n;if(this.isEdit){if(""===t.name.trim()||void 0===t.name)return void this.$message.error("分组名称不可为空");n={id:t.id,name:t.name,key:this.$store.state.app.activeApp.saa_key}}else n={id:t.id,status:t.status?"1":"0",key:this.$store.state.app.activeApp.saa_key};Object(r["f"])(n).then((function(t){200===t.status?(e.$message.success("修改成功"),e.getPicGroup(),e.editId=0,e.isEdit=!1):(e.$message.error(t.message),e.editId=0,e.isEdit=!1)}))}},del:function(t){var e=this;this.isDel=!1;var i={id:t.id,key:this.$store.state.app.activeApp.saa_key};Object(r["c"])(i).then((function(t){200===t.status?(e.$message.success("删除成功"),e.getPicGroup()):e.$message.error(t.message)}))},searchGroup:function(){var t=this;console.log(this.groupName);var e={key:this.$store.state.app.activeApp.saa_key,status:"1",limit:100,name:this.groupName};Object(r["e"])(e).then((function(e){200===e.status?(t.picGroup=e.data,t.picGroup.forEach((function(t){"1"===t.status?t.status=!0:t.status=!1})),t.$store.dispatch("picture/PicGroup",t.picGroup)):(t.picGroup=[],t.$store.dispatch("picture/PicGroup",t.picGroup),e.message)})).catch((function(e){t.picGroup=[],t.$store.dispatch("picture/PicGroup",t.picGroup),e.message}))}},filters:{formatTime:function(t){return Object(u["a"])(t,"{y}-{m}-{d}")}}},h=d,p=(i("eb3b"),i("2877")),m=Object(p["a"])(h,c,o,!1,null,"7c7bf5ae",null),f=m.exports,g={name:"PhotoAlbum",mixins:[l],components:{LPic:a["a"],PicGroup:f},props:{maxcount:{type:Number,default:-1}},data:function(){return{picGroupId:0,imgList:[],number:0,defaultCount:0,selectPicList:new Array,activeApp:this.$store.state.app.activeApp,page:1,limit:18,isChecked:!0,imgurl:"images/2.jpg",dialogPicGMa:!1,searchName:""}},computed:{viewUrlList:function(){var t=new Array;return this.imgList.forEach((function(e){t.push(e.pic_url)})),t}},mounted:function(){this.getPic()},methods:{beforeGroup:function(){this.dialogPicGMa=!1,this.getPicGroup()},getPic:function(){var t=this;this.selectPicList=new Array,this.isChecked=!0;var e={id:this.picGroupId,key:this.activeApp.saa_key,limit:this.limit,page:this.page};Object(r["d"])(e).then((function(e){200===e.status?(t.imgList=e.data,t.setNum(parseInt(e.count))):204===e.status?(t.imgList=[],t.setNum(0)):t.$message.error(e.message)}))},setNum:function(t){var e=this;this.number=t,0===this.picGroupId?this.defaultCount=t:this.picGroup.some((function(i){if(i.id===e.picGroupId)return i.number=t,!0}))},switchPhoto:function(t){this.picGroupId=t,this.page=1,this.getPic()},delPic:function(t){var e=this,i={id:t.id,key:this.activeApp.saa_key};Object(r["b"])(i).then((function(t){200===t.status?e.getPic():e.$message.error(t.message)}))},selectPic:function(t){t.checked?this.maxcount>0?this.selectPicList.length<=this.maxcount&&(this.selectPicList.push(t.picData),this.selectPicList.length===this.maxcount&&(this.isChecked=!1,this.$message("最多可选".concat(this.maxcount,"张，已选择").concat(this.maxcount,"张")))):0===this.maxcount?(this.isChecked=!1,this.$message("最多可选".concat(this.maxcount,"张，已选择").concat(this.maxcount,"张"))):this.selectPicList.push(t.picData):(this.selectPicList.splice(this.selectPicList.findIndex((function(e){return e.id===t.picData.id})),1),this.selectPicList.length<this.maxcount&&(this.isChecked=!0))},pageChange:function(t){this.page=t,this.getPic()},submit:function(){0===this.selectPicList.length&&this.$message.warning("未选中任何图片"),this.$emit("selectPicData",this.selectPicList)},imgChange:function(t){var e=this,i={key:this.$store.state.app.activeApp.saa_key,picture_group_id:this.picGroupId},n=new FileReader;n.readAsDataURL(t.raw),n.onload=function(){var s=new Image;s.src=n.result,i.pic_url=[n.result],i.name=[t.name],s.onload=function(){i.width=[s.width],i.height=[s.height],Object(r["g"])(i).then((function(t){200===t.status?(e.$message.success("上传成功！"),e.page=1,e.getPic()):e.$message.error(t.msg)}))}}},upLoad:function(){var t={};Object(r["g"])(t)},search:function(){var t=this;this.selectPicList=new Array,this.isChecked=!0;var e={id:this.picGroupId,key:this.activeApp.saa_key,limit:this.limit,page:this.page};0!=this.searchName.length&&(e.name=this.searchName),Object(r["d"])(e).then((function(e){200===e.status?(t.imgList=e.data,t.setNum(parseInt(e.count))):204===e.status?(t.imgList=[],t.setNum(0)):t.$message.error(e.message)}))}}},v=g,b=(i("ae29"),Object(p["a"])(v,n,s,!1,null,"ff852f3e",null));e["a"]=b.exports},ae29:function(t,e,i){"use strict";var n=i("5b16"),s=i.n(n);s.a},e2cc:function(t,e,i){},eb3b:function(t,e,i){"use strict";var n=i("edf7"),s=i.n(n);s.a},edf7:function(t,e,i){}}]);