(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/home/addAddress/addAddress"],{"27a3":function(t,e,n){"use strict";(function(t){function n(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function i(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?n(Object(i),!0).forEach((function(e){a(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;getApp();var o={data:function(){return{name:"",phone:"",address:"",province:"",city:"",area:"",street:"",is_default:!1,status:!1,postcode:"000000",longitude:0,latitude:0,loction_address:"",loction_name:"",background:"",nlp:"",chooseList:[],provinceList:[],cityList:[],areaList:[],multindex:[0,0,0]}},components:{},props:{},onLoad:function(e){this.options=e,this.setTheme(),this.getprovince(),this.options.id&&this.getData(this.options.id),wx.setNavigationBarTitle({title:"新增收货地址"}),this.setData({background:t.getStorageSync("background")})},methods:{go:function(){wx.redirectTo({url:"../address/address"})},changeSwitch:function(t){this.setData({is_default:t.detail.value})},postShopContact:function(t){var e=this,n=t.detail.value,i={name:"请输入收货人姓名",phone:"请输入手机号",address:"请填写详细地址",loction_address:"请选择所在地"};for(var a in console.log(n),n)if(0===n[a].length)return wx.showToast({title:i[a],icon:"none"}),!1;n.province=this.province,n.city=this.city,n.area=this.area,n.longitude=this.longitude,n.latitude=this.latitude,n.loction_name=this.loction_name,n.is_default=this.is_default?1:0,wx.showToast({title:"提交中",icon:"loading"}),this.http({url:this.status?"shopContact/".concat(this.id):"shopContact",method:this.status?"put":"post",data:n}).then((function(t){e.status?wx.navigateBack():wx.redirectTo({url:"../address/address"})}))},bindRegionChange:function(t){console.log(t),this.province=this.provinceList[t.detail.value[0]].name,this.city=this.cityList[t.detail.value[1]].name,this.area=this.areaList[t.detail.value[2]].name,this.loction_address=this.province+this.city+this.area},columnchange:function(t){var e=this.multindex;0==t.detail.column?(e=[t.detail.value,0,0],this.setData({multindex:e}),this.getCity(this.provinceList[t.detail.value].code)):1==t.detail.column?(e[t.detail.column]=t.detail.value,this.setData({multindex:e}),this.getArea(this.cityList[t.detail.value].code)):(e[t.detail.column]=t.detail.value,this.setData({multindex:e}))},getprovince:function(){var t=this;this.http({url:"shopArea"}).then((function(e){console.log(e);var n=t.multindex;n[1]=0,t.provinceList=e.data,t.multindex=n,t.getCity(e.data[0].code)}))},getCity:function(t){var e=this;this.http({url:"shopAreaSubset",data:{code:t}}).then((function(t){var n=e.multindex;n[2]=0,e.cityList=t.data,e.multindex=n,e.getArea(t.data[0].code)})).catch((function(t){e.chooseList=[e.provinceList,[],[]],e.cityList=[],e.areaList=[],e.multindex=[e.multindex[0],0,0]}))},getArea:function(t){var e=this;this.http({url:"shopAreaSubset",data:{code:t}}).then((function(t){e.areaList=t.data,e.chooseList=[e.provinceList,e.cityList,t.data]})).catch((function(t){e.chooseList=[e.provinceList,e.cityList,[]],e.areaList=[],e.multindex=[e.multindex[0],e.multindex[1],0]}))},getData:function(e){var n=this;wx.request({url:t.getStorageSync("url")+"shopContact/"+e,method:"get",header:{"Access-Token":t.getStorageSync("jwt")},success:function(t){n.setData(i({},t.data.data))}})},chooseLocal:function(){var t=this;wx.chooseLocation({success:function(e){t.setData({longitude:e.longitude,latitude:e.latitude,loction_name:e.name})},fail:function(t){wx.getSetting({complete:function(t){t.authSetting["scope.userLocation"]||wx.showToast({title:'请在右上角设置中开启"使用我的地理位置"',icon:"none"})}})}})},writeNlp:function(t){this.setData({nlp:t.detail.value})},toaddress:function(){var t=this;setTimeout((function(){console.log(t.nlp);var e=t.nlp,n=t.toAddressData(/\d{11}/.exec(e));e=e.replace(n,"");var i=t.toAddressData(/(\S)+(省|自治区)/.exec(e));e=e.replace(i,"");var a=t.toAddressData(/(\S)+市/.exec(e));e=e.replace(a,"");var o=t.toAddressData(/(\S)+区/.exec(e));e=e.replace(o,"");var s,c=e.split(" ").map((function(t){return[t,t.length]})).sort((function(t,e){return e[1]-t[1]})),r="";try{s=2==c[0].length?c[0][0]:"",r=2==c[1].length?c[1][0]:""}catch(u){}console.log("手机号-".concat(n,"; 省-").concat(i,"; 市-").concat(a,"; 区-").concat(o,"; 地址-").concat(s,"; 姓名-").concat(r)),t.setData({name:r,phone:n,address:s,province:i,city:a,area:o,loction_address:i+a+o,loction_name:s})}),100)},toAddressData:function(t){return null==t?"":t[0]}}};e.default=o}).call(this,n("543d")["default"])},"912a":function(t,e,n){"use strict";(function(t){n("cd90");i(n("66fd"));var e=i(n("93c6"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},"93c6":function(t,e,n){"use strict";n.r(e);var i=n("d59f"),a=n("e7d8");for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);n("f4ef");var s,c=n("f0c5"),r=Object(c["a"])(a["default"],i["b"],i["c"],!1,null,"686b1cdb",null,!1,i["a"],s);e["default"]=r.exports},b077:function(t,e,n){},d59f:function(t,e,n){"use strict";var i,a=function(){var t=this,e=t.$createElement;t._self._c},o=[];n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return i}))},e7d8:function(t,e,n){"use strict";n.r(e);var i=n("27a3"),a=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=a.a},f4ef:function(t,e,n){"use strict";var i=n("b077"),a=n.n(i);a.a}},[["912a","common/runtime","common/vendor"]]]);