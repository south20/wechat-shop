(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/classgoods/classgoods"],{"1fc8":function(t,e,a){"use strict";var n=a("c37a"),r=a.n(n);r.a},8388:function(t,e,a){"use strict";a.r(e);var n=a("c986"),r=a("d8d2");for(var i in r)"default"!==i&&function(t){a.d(e,t,(function(){return r[t]}))}(i);a("1fc8");var o,s=a("f0c5"),c=Object(s["a"])(r["default"],n["b"],n["c"],!1,null,"5d40ed9c",null,!1,n["a"],o);e["default"]=c.exports},c37a:function(t,e,a){},c986:function(t,e,a){"use strict";var n,r=function(){var t=this,e=t.$createElement;t._self._c},i=[];a.d(e,"b",(function(){return r})),a.d(e,"c",(function(){return i})),a.d(e,"a",(function(){return n}))},d8d2:function(t,e,a){"use strict";a.r(e);var n=a("e3e6"),r=a.n(n);for(var i in n)"default"!==i&&function(t){a.d(e,t,(function(){return n[t]}))}(i);e["default"]=r.a},e3e6:function(t,e,a){"use strict";(function(t){function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,e,a){return e&&r(t.prototype,e),a&&r(t,a),t}function o(t){if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=g(t))){var e=0,a=function(){};return{s:a,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,r,i=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return i=t.done,t},e:function(t){o=!0,r=t},f:function(){try{i||null==n.return||n.return()}finally{if(o)throw r}}}}function s(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function c(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?s(Object(a),!0).forEach((function(e){u(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function u(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function d(t){return p(t)||h(t)||g(t)||l()}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function g(t,e){if(t){if("string"===typeof t)return m(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(a):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?m(t,e):void 0}}function h(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function p(t){if(Array.isArray(t))return m(t)}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var f="",_=function(){a.e("pages/utill/addShopCartLayer/addShopCartLayer").then(function(){return resolve(a("13f2"))}.bind(null,a)).catch(a.oe)},y={data:function(){return{chooseindex:-1,menuList:[],menuData:[],headerFlag:1,m_category_id:0,ontime:{hours:"24",minutes:"00",seconds:"00"},willtime:{hours:"24",minutes:"0",seconds:"0"},current_page:1,ajaxFlag:!0,is_open:!1,cartList:{},goodsData:{},propertyList:"",supplier_id:"",layerData:"",cartShowLayer:!1}},components:{addShopCartLayer:_},props:{data:{type:Object},pageFlag:{type:Number},background:{type:String},reload:{type:Boolean},leave:{type:Boolean}},watch:{data:{handler:function(t){t.id&&(1==t.details.type&&0==this.menuList.length?this.getList():this.getshopGrouping(),this.getTime())},immediate:!0,deep:!0},pageFlag:{handler:function(t){this.getData(this.m_category_id)},immediate:!0},reload:{handler:function(t){t&&(this.setData({menuData:[],current_page:1,ajaxFlag:!0}),this.getData(this.m_category_id),this.getTime())},immediate:!0},leave:{handler:function(t){t?clearInterval(f):this.getTime()},immediate:!0}},beforeMount:function(){this.getShopCart()},destroyed:function(){clearInterval(f)},methods:{getList:function(){var e=this;wx.request({url:"".concat(t.getStorageSync("url"),"shopSubCategory"),data:{key:t.getStorageSync("shopkey")},success:function(a){200===a.data.status&&(e.setData({menuList:a.data.data,is_open:t.getStorageSync("Config").is_stock}),e.getData(0))}})},getData:function(e){var a=this;if(this.ajaxFlag){this.setData({ajaxFlag:!1});var n={key:t.getStorageSync("shopkey"),current_page:this.current_page};0!=e&&(n.m_category_id=e),2==this.headerFlag&&(n.type=1),this.$emit("loading",{detail:{status:!0}}),this.http({url:"shopGoods",data:n}).then((function(t){a.setData({menuData:[].concat(d(a.menuData),d(t.data.map((function(t){return c({},t,{format_start_time1:t.format_start_time1.replace(/\:/,"-"),format_end_time1:t.format_end_time1.replace(/\:/,"-")})})))),current_page:a.current_page+1,m_category_id:e,ajaxFlag:!0}),a.$emit("loading",{detail:{status:!1}})})).catch((function(t){a.setData({menuData:a.menuData,m_category_id:e}),a.$emit("loading",{detail:{status:!1}})}))}},change:function(t){1==this.data.details.type||0==t.currentTarget.dataset.id?(this.setData({chooseindex:t.currentTarget.dataset.index,menuData:[],current_page:1,ajaxFlag:!0,m_category_id:t.currentTarget.dataset.id}),this.getData(t.currentTarget.dataset.id)):(this.setData({chooseindex:t.currentTarget.dataset.index,menuData:[],current_page:1,ajaxFlag:!0,m_category_id:t.currentTarget.dataset.id}),this.getshopGroupGoods())},go:function(t){clearInterval(f),t.currentTarget.dataset.is_bargain?wx.navigateTo({url:"/bargaining/pages/goodItem/goodItem/goodItem?id=".concat(t.currentTarget.dataset.id)}):wx.navigateTo({url:"/pages/goodsItem/goodsItem/goodsItem?id=".concat(t.currentTarget.dataset.id)})},changeHeader:function(t){this.setData({headerFlag:t.currentTarget.dataset.type,chooseindex:-1,current_page:1,menuData:[],ajaxFlag:!0}),this.getData(0)},getTime:function(){var e=this;wx.request({url:"".concat(t.getStorageSync("url"),"shopTuanConfig"),data:{key:t.getStorageSync("shopkey")},header:{"Access-Token":t.getStorageSync("jwt")},success:function(t){if(console.log(t.data),200===t.data.status){wx.setStorageSync("leader_name",t.data.data.leader_name);var a=new D(t.data.data.open_time,t.data.data.close_time);e.setData({ontime:a.init_start_time(),willtime:a.init_close_time()}),f=setInterval((function(){e.setData({ontime:a.init_start_time(),willtime:a.init_close_time()})}),1e3)}}})},getShopCart:function(){var t=this;this.http({url:"shopCart",noLogin:!0}).then((function(e){var a,n={},r=o(e.data);try{for(r.s();!(a=r.n()).done;){var i=a.value;n[i.stock_id]=i.number}}catch(s){r.e(s)}finally{r.f()}t.setData({cartList:n})})).catch((function(e){t.setData({cartList:{}})}))},changeCart:function(t){var e=this;this.http({url:"shopCart",method:"post",data:{goods_id:t.currentTarget.dataset.goods_id,stock_id:t.currentTarget.dataset.stock_id,number:"reduce"==t.currentTarget.dataset.type?-1:1}}).then((function(t){e.getShopCart(),e.$emit("cartUpdata")}))},cartUpdata:function(){this.cartChangeshowLayer(),this.$emit("cartUpdata")},getshopGrouping:function(){var e=this;this.http({url:"shopGrouping",noLogin:!0,data:{key:t.getStorageSync("shopkey")}}).then((function(t){console.log(t),e.setData({menuList:t.data}),e.getData(0)}))},getshopGroupGoods:function(){var e=this;this.setData({ajaxFlag:!1}),this.http({url:"shopGroupingGoods",noLogin:!0,data:{key:t.getStorageSync("shopkey"),grouping_id:this.m_category_id,page:this.current_page}}).then((function(t){e.setData({menuData:[].concat(d(e.menuData),d(t.data.map((function(t){return c({},t,{format_start_time1:t.format_start_time1.replace(/\:/,"-"),format_end_time1:t.format_end_time1.replace(/\:/,"-")})})))),ajaxFlag:!0,current_page:e.current_page+1}),e.$emit("loading",{detail:{status:!1}})}))},showProperty:function(t){var e=this.menuData[t.currentTarget.dataset.index];t.currentTarget.dataset.index;console.log(e),this.cartShowLayer=!this.cartShowLayer,this.propertyList=Object.fromEntries(e.stock.map((function(t){return[t.property1_name+t.property2_name,t.id]}))),this.layerData=e,this.supplier_id=this.menuData[t.currentTarget.dataset.index].supplier_id},cartChangeshowLayer:function(){this.cartShowLayer=!this.cartShowLayer}}};e.default=y;var D=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;n(this,t),console.log(e,a),this.close_time_will=new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()+1,parseInt(a/3600),parseInt(a%3600/60),a%60).getTime(),this.close_time_on=new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate(),parseInt(a/3600),parseInt(a%3600/60),a%60).getTime(),this.start_time_will=new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()+1,parseInt(e/3600),parseInt(e%3600/60),e%60).getTime(),this.start_time_on=new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate(),parseInt(e/3600),parseInt(e%3600/60),e%60).getTime(),console.log(this.start_time_will,this.start_time_on)}return i(t,[{key:"init_close_time",value:function(){var t=(new Date).getTime()<this.close_time_on?parseInt((this.close_time_on-(new Date).getTime())/1e3):parseInt((this.close_time_will-(new Date).getTime())/1e3),e=parseInt(t/3600).toString().padStart(2,0),a=parseInt(t%3600/60).toString().padStart(2,0),n=parseInt(t%60).toString().padStart(2,0);return{hour:e,minute:a,second:n}}},{key:"init_start_time",value:function(){var t=(new Date).getTime()<this.start_time_on?parseInt((this.start_time_on-(new Date).getTime())/1e3):parseInt((this.start_time_will-(new Date).getTime())/1e3),e=parseInt(t/3600).toString().padStart(2,0),a=parseInt(t%3600/60).toString().padStart(2,0),n=parseInt(t%60).toString().padStart(2,0);return{hour:e,minute:a,second:n}}}]),t}()}).call(this,a("543d")["default"])}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'pages/index/classgoods/classgoods-create-component',
    {
        'pages/index/classgoods/classgoods-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("8388"))
        })
    },
    [['pages/index/classgoods/classgoods-create-component']]
]);
