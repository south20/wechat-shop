(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login2/login2"],{"274e":function(t,e,n){"use strict";n.r(e);var o=n("4d68"),a=n.n(o);for(var i in o)"default"!==i&&function(t){n.d(e,t,(function(){return o[t]}))}(i);e["default"]=a.a},"4d68":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;getApp();var n={data:function(){return{imgSrc:"",text_selection:"",bottom_text:""}},components:{},props:{},onShow:function(t){this.setTheme(),wx.setNavigationBarTitle({title:"登录"}),this.getShopBg()},methods:{getUserInfo:function(t){var e=this;wx.checkSession({success:function(n){e.login().catch((function(n){console.log("err",n),wx.showToast({title:"测试"}),e.tologin(t.detail)})).then((function(t){console.log("ok",t),wx.showToast({title:"登录成功",icon:"none"}),wx.navigateBack()}))},fail:function(n){console.log("调取授权失败",n),e.login().catch((function(n){wx.showToast({title:"测试"}),e.tologin(t.detail)})).then((function(t){wx.showToast({title:"登录成功",icon:"none"}),wx.navigateBack()}))}})},tologin:function(e){var n=this;console.log(e);var o={openid:t.getStorageSync("openid"),encryptedData:e.encryptedData,sessionKey:t.getStorageSync("session_key"),iv:e.iv,signature:e.signature,nickName:e.userInfo.nickName,gender:e.userInfo.gender,language:e.userInfo.language,city:e.userInfo.city,province:e.userInfo.province,avatarUrl:e.userInfo.avatarUrl,key:t.getStorageSync("shopkey"),type:"miniprogram"};wx.request({url:t.getStorageSync("url")+"shopXcxLogin",method:"get",data:o,header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){200==t.data.status?(wx.setStorageSync("jwt",t.data.data),n.bindGroup(),setTimeout((function(){wx.navigateBack({})}),200)):wx.showToast({title:t.data.message,icon:"none"})}})},getShopBg:function(){var e=this;this.http({url:"ShopAppInfo",data:{key:t.getStorageSync("shopkey")}}).then((function(t){e.setData({imgSrc:t.data.pic_url_login||"/static/images/login/logo.png"})}))},getThen:function(){var e=this;wx.request({url:"".concat(t.getStorageSync("url"),"shopThemes"),data:{key:t.getStorageSync("shopkey")},success:function(t){200==t.data.status&&(wx.setNavigationBarColor({frontColor:"white"==t.data.data.theme_text?"#ffffff":"#000000",backgroundColor:t.data.data.theme}),e.setData({text_selection:t.data.data.text_selection,bottom_text:t.data.data.bottom_text}),wx.setStorageSync("background",t.data.data.theme),wx.setStorageSync("text_selection",t.data.data.text_selection),e.$emit("background",{detail:{color:t.data.data.theme}}))}})},back:function(){wx.redirectTo({url:"/pages/index/index/index"})}}};e.default=n}).call(this,n("543d")["default"])},"734f":function(t,e,n){"use strict";n.r(e);var o=n("8d56"),a=n("274e");for(var i in a)"default"!==i&&function(t){n.d(e,t,(function(){return a[t]}))}(i);n("ef33");var c,r=n("f0c5"),s=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,"037b1282",null,!1,o["a"],c);e["default"]=s.exports},8879:function(t,e,n){},"8d56":function(t,e,n){"use strict";var o,a=function(){var t=this,e=t.$createElement;t._self._c},i=[];n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return o}))},cc42:function(t,e,n){"use strict";(function(t){n("cd90");o(n("66fd"));var e=o(n("734f"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},ef33:function(t,e,n){"use strict";var o=n("8879"),a=n.n(o);a.a}},[["cc42","common/runtime","common/vendor"]]]);