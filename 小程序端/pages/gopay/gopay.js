(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/gopay/gopay"],{"360c":function(e,t,o){"use strict";(function(e){o("cd90");n(o("66fd"));var t=n(o("eaea"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,o("543d")["createPage"])},"79cc":function(e,t,o){},"91f5":function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o={data:function(){return{balance_pay_is_open:!1,recharge_balance:0,pay_type:2,bg:"",order_price:192}},components:{},props:{},onLoad:function(t){var o=this;this.options=t,this.options=t,wx.setNavigationBarTitle({title:"确认订单信息"}),this.setTheme(),console.log(t),Promise.all([this.getPlugin(),this.getUserInfo()]).then((function(n){o.setData({recharge_balance:n[1].data.recharge_balance,balance_pay_is_open:1==n[0].data.balance_pay&&!t.hasOwnProperty("is_advance_sale"),order_price:o.options.order_price,bg:e.getStorageSync("background")})}))},onPullDownRefresh:function(){},onHide:function(){wx.setStorageSync("tuanNum",0)},onUnload:function(){wx.setStorageSync("tuanNum",0)},methods:{getPlugin:function(){return this.http({url:"shopPlugin",data:{key:e.getStorageSync("shopkey")}})},getUserInfo:function(){return this.http({url:"shopUserInfo"})},change_pay_type:function(e){this.setData({pay_type:e.detail.value})},subscribeMessage:function(){var t=this,o=[e.getStorageSync("SubscribeTemplateId")["refund"],e.getStorageSync("SubscribeTemplateId")["pick_up_notice"]];console.log(o),e.getStorageSync("SubscribeTemplateId")["refund"]?wx.requestSubscribeMessage({tmplIds:o,success:function(e){console.log("1"),t.postSubscribeMessage(e),t.toPay({})},fail:function(e){console.log("2"),t.toPay({})}}):this.toPay({})},toPay:function(t){var o=this,n=t.order_sn,a=void 0===n?this.options.order_sn:n,r=t.is_tuan,i=void 0===r?0!=e.getStorageSync("tuanNum"):r,s=t.group_id,c=void 0===s?this.options.group_id:s,u=t.group_number,p=void 0===u?this.options.group_number:u;this.http({url:"shopGoPay1/".concat(a),method:"post",data:{type:this.pay_type}}).then((function(e){2==o.pay_type?o.requestPayment(e.data,a,i,c,p):(o.getUserInfo(),wx.setStorageSync("shopcartData",[]),i?o.isMeet(c,p,a):o.options.hasOwnProperty("solitaire")?wx.navigateTo({url:"/solitaire/mysolitaireshare/mysolitaireshare?id=".concat(o.options.solitaire,"&price=").concat(o.order_price)}):wx.redirectTo({url:"/pages/payOk/payOk/payOk?order_sn=".concat(a)}))}))},isMeet:function(t,o,n){o==e.getStorageSync("tuanNum")?wx.redirectTo({url:"/pages/spellGroup/okGroup/okGroup?id=".concat(0!=this.options.group_id?this.options.group_id:t,"&order_sn=").concat(n)}):wx.redirectTo({url:"/pages/spellGroup/willGroup/willGroup?id=".concat(0!=this.options.group_id?this.options.group_id:t,"&order_sn=").concat(n)})},requestPayment:function(e,t,o,n,a){var r=this;wx.requestPayment({timeStamp:e.timeStamp,nonceStr:e.nonceStr,package:e.package,signType:e.signType,paySign:e.paySign,success:function(e){wx.setStorageSync("shopcartData",[]),o?r.isMeet(n,a,t):wx.redirectTo({url:"/pages/payOk/payOk/payOk?order_sn=".concat(t)})},fail:function(e){console.log(e),wx.redirectTo({url:"/pages/order/order/order"})}})}}};t.default=o}).call(this,o("543d")["default"])},b802:function(e,t,o){"use strict";o.r(t);var n=o("91f5"),a=o.n(n);for(var r in n)"default"!==r&&function(e){o.d(t,e,(function(){return n[e]}))}(r);t["default"]=a.a},eaea:function(e,t,o){"use strict";o.r(t);var n=o("f689"),a=o("b802");for(var r in a)"default"!==r&&function(e){o.d(t,e,(function(){return a[e]}))}(r);o("ecde");var i,s=o("f0c5"),c=Object(s["a"])(a["default"],n["b"],n["c"],!1,null,"df4c436a",null,!1,n["a"],i);t["default"]=c.exports},ecde:function(e,t,o){"use strict";var n=o("79cc"),a=o.n(n);a.a},f689:function(e,t,o){"use strict";var n,a=function(){var e=this,t=e.$createElement;e._self._c},r=[];o.d(t,"b",(function(){return a})),o.d(t,"c",(function(){return r})),o.d(t,"a",(function(){return n}))}},[["360c","common/runtime","common/vendor"]]]);