(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["bargaining/pages/goodItem/layer/layer"],{"20ac":function(t,e,a){"use strict";a.r(e);var r=a("771c"),o=a("3fbd");for(var i in o)"default"!==i&&function(t){a.d(e,t,(function(){return o[t]}))}(i);a("89e2f");var n,s=a("f0c5"),p=Object(s["a"])(o["default"],r["b"],r["c"],!1,null,"9c225e4e",null,!1,r["a"],n);e["default"]=p.exports},"24a3":function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={data:function(){return{property1:{},property2:{},picUrl:"",gooddetail:{},num:1}},components:{},props:{data:{type:Object},isBuy:{type:Boolean},layerFlag:{type:Boolean}},watch:{data:{handler:function(t){if(t.name&&(this.getProperty1(t.property1),0!=t.property2.length)){var e={name:t.property2.split(":")[0],data:t.property2.split(":")[1].split(","),flag:0};this.setData({property2:e})}},immediate:!0,deep:!0},isBuy:{handler:function(t){t||this.setData({num:1})},immediate:!0}},methods:{hideLayer:function(){this.$emit("hideLayer",{detail:{flag:!1}})},getProperty1:function(t){var e={name:t.split(":")[0],data:t.split(":")[1].split(","),flag:0};this.setData({property1:e}),this.getProperty2List(e)},getProperty2List:function(e){var a,r=this,o=this.property1;try{a=e.data[e.flag]}catch(i){a=e.currentTarget.dataset.name,o.flag=e.currentTarget.dataset.index}this.http({url:"shopGoodsStockProperty/".concat(this.data.id),data:{property1_name:a,key:t.getStorageSync("shopkey")}}).then((function(t){var e,a=[];t.data.map((function(t){a.push(t.property2_name)})),console.log(a),e={name:r.property2.name,data:a,flag:0},r.setData({property2:e,property1:o}),console.log(o),r.getProperty2Detail(e)}))},getProperty2Detail:function(e){var a,r=this,o=this.property2;e.currentTarget?(a={property1_name:this.property1.data[this.property1.flag],property2_name:e.currentTarget.dataset.name,key:t.getStorageSync("shopkey")},o.flag=e.currentTarget.dataset.index):a={property1_name:this.property1.data[this.property1.flag],property2_name:e.data[e.flag]||"",key:t.getStorageSync("shopkey")},this.http({url:"shopGoodsStock/".concat(this.data.id),data:a}).then((function(t){console.log(t),r.setData({gooddetail:t.data,property2:o})}))},tobuy:function(){var e=this;return 0==this.sales?(wx.showToast({title:"该商品已售罄,请联系卖家补货",icon:"none"}),!1):t.getStorageSync("is_bool")?(wx.showToast({title:"现在是休市时间,无法购买, 请将商品加入购物车",icon:"none"}),!1):void this.http({url:"shopUserInfo"}).then((function(t){var a=[{supplier_id:e.data.supplier_id,supplier_name:e.data.supplier_name,list:[{goods_id:e.data.id,goods_name:e.gooddetail.name,price:e.gooddetail.price,number:e.num,total_price:e.gooddetail.price*e.num,property1_name:e.property1.data[e.property1.flag],property2_name:e.property2.data[e.property2.flag],pic_url:e.gooddetail.pic_url,stock_id:e.gooddetail.id,service_goods_is_ship:e.data.service_goods_is_ship,type:e.data.type}]}];wx.setStorageSync("shopcartData",a),wx.navigateTo({url:"/pages/createOrder/createOrder/createOrder?group_id=".concat(e.group_id)})}))},toBargaining:function(){this.http({url:"shopBargain",method:"post",data:{name:this.gooddetail.name,goods_id:this.data.id,stock_id:this.gooddetail.id}}).then((function(t){wx.navigateTo({url:"/bargaining/pages/buyDetail/buyDetail?id=".concat(t.data)})}))},subtract:function(){this.setData({num:1==this.num?this.num:this.num-1})},add:function(){this.isBuy&&this.setData({num:this.num==this.gooddetail.number?this.num:this.num+1}),console.log(this.property2)},postSM:function(){var e=this,a=[];a.push(t.getStorageSync("SubscribeTemplateId")["bargain"]),a.push(t.getStorageSync("SubscribeTemplateId")["merchandise_arrival"]),t.getStorageSync("SubscribeTemplateId")["check"]?wx.requestSubscribeMessage({tmplIds:a,success:function(t){e.postSubscribeMessage(t),e.toBargaining()},fail:function(t){e.toBargaining()}}):this.toBargaining()}}};e.default=a}).call(this,a("543d")["default"])},"3fbd":function(t,e,a){"use strict";a.r(e);var r=a("24a3"),o=a.n(r);for(var i in r)"default"!==i&&function(t){a.d(e,t,(function(){return r[t]}))}(i);e["default"]=o.a},"771c":function(t,e,a){"use strict";var r,o=function(){var t=this,e=t.$createElement;t._self._c},i=[];a.d(e,"b",(function(){return o})),a.d(e,"c",(function(){return i})),a.d(e,"a",(function(){return r}))},8125:function(t,e,a){},"89e2f":function(t,e,a){"use strict";var r=a("8125"),o=a.n(r);o.a}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'bargaining/pages/goodItem/layer/layer-create-component',
    {
        'bargaining/pages/goodItem/layer/layer-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("20ac"))
        })
    },
    [['bargaining/pages/goodItem/layer/layer-create-component']]
]);
